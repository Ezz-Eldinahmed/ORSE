const Personalitytypes = [{
        type: "INTJ",
        description: "you are usually quiet, reserved and comfortable being alone. you are interested in ideas and theories and enjoy questioning why things happen the way they do. you are excel at planning and strategizing and don’t like uncertainty." +
            "you have a talent for recognizing connections that makes you natural problem-solvers and you are skilled at both intuitive and practical thinking.",
        jobs: ["System Engineering :Computers systems analysts are IT professionals who specialize in analyzing, designing, and implementing information systems to help organizations operate more efficiently. you are good at critically assessing systems and processes" +
            "and finding ways to improve them—a key part of a computer systems analysts’ job",
            "Project manager . your logical and methodical nature predisposes them to jobs where you are responsible for overseeing production timelines, systems, and budgets, such as project management. "
        ],
        categroies: ["Real-Time Embedded Systems", "Solving Complex Problems"]
    },
    {
        type: "ENTJ",
        description: "You enjoy the process of discovering and implementing a better solution." +
            "You are motivated to organize people and processes to achieve big picture results.",
        jobs: ["Corporate CEO:you can motivate teams, speak powerfully in front of large crowds and keep projects on track.", "Public relations specialist"],
        categroies: ["Enterprise Architecture", "Strategy and Sustainability"]
    },
    {
        type: "ISTJ",
        description: "The Organizer : you  prefer concrete facts over abstract concepts and tend not to enjoy long-winded philosophical conversations.Eager to uphold tradition and follow rules," +
            "you are good at executing detailed, logical tasks. you have a keen sense of right and wrong.",
        jobs: ["Data analyst. Data analysts gather, organize, and process data to make recommendations for business processes. you will enjoy working with concrete facts and numbers, and being organized and detail-oriented, they’re good at designing technical and data-driven solutions for businesses." +
            "Business analysts know exactly where they stand and have a clear objective to work towards—the definition of a good career for you",
            "Certified Public Accountant. CPAs enjoy a stable and predictable career, essential elements of a “good” job for you. They work with numbers and must ensure their work adheres to strict compliance regulations. Being very by-the-book," +
            "you are good at methodically working through financial records and ensuring they are correct."
        ],
        categroies: ["Data Analysis and Interpretation"]
    },
    {
        type: "ESTJ",
        description: "you are organized and believer in doing what you believe is right and socially acceptable. you often take the role of leader and people look to you for guidance and counsel.",
        jobs: ["Technical manager. At the top of your careers list are technical roles with data engineering or team management capabilities—ideally both.  you have ability to lead confidently and" +
            " your strong communication style will help you thrive in management positions.", "Corporate management"
        ],
        categroies: ["The Business Management"]
    },
    {
        type: "INFJ",
        description: "you are  spend a great deal of time envisioning an idyllic future—a skill that can be put to use in your career matches." +
            "However, they are not simply daydreamers or philosophers; rather, they are motivated to take action on their vision.",
        jobs: ["Psychologist. Given your empathetic nature and ability to read others, psychology is a natural career path for you. Psychologists help individuals, couples, and families work through issues affecting their mental health and wellbeing," +
            "as well as study human behavior.", "Technical writer. INFJs enjoy work that involves deep thought and reflection, so are naturally suited to any type of writing role. Technical writers specialize in technology-focused content that helps organizations document their systems and processes," +
            "as well as producing consumer-facing content to help users understand a complex technical product. The highest-paid technical writers have a background in software engineering or data science.", "HR generalist. HR generalists are responsible for planning and administrative hiring duties. " +
            "They need to be able to read people and infer whether they have the necessary skills and qualities for an open role"
        ],
        categroies: ["Psychology"]
    },
    {
        type: "ENFJ",
        description: "You know how to connect with others and rely on intuition and feelings, you  generally feel compelled to make the world a better place." +
            "The best careers for your personality types will be in industries that encourage collaboration and innovation.",
        jobs: ["Art director. this career is an ideal fit because Combining your knack for leadership and love of creative ", "Life coaching", "Motivational speaking", "Public relation"],
        categroies: ["Dynamic Public Speaking", "Public Relation"]
    },
    {
        type: "ISFJ",
        description: " you have a deep sense of responsibility to others. you want people to know that they are reliable and can be trusted—which is important to the career path ." +
            "you are driven to contribute positively to their society, organization, and family. In the workplace, they make for pleasant coworkers and exemplary employees." +
            "career paths include teaching, nursing, social work, medicine.",
        jobs: ["Nurse. Nursing allows you to make the most of their compassionate nature and talent for organization." +
            "They value established practices and procedures and are looking to fill roles that contribute to a higher purpose, such as in healthcare or education.", "Teaching"
        ],
        categroies: ["Anatomy", "Medical Emergencies"]
    },
    {
        type: "ESFJ",
        description: "You need to interact with others , you usually enjoy organizing social events for friends and family. Because you look for cooperation and harmony in the workplace",
        jobs: ["Technical support . Capitalizing on their intrinsic desire to help others and communicate.", "Office manager"],
        categroies: ["Marketing & Management", "Technical Support Fundamentals"]
    },
    {
        type: "INTP",
        description: "you love patterns, are quick to notice discrepancies and have a strong ability to read people. you will enjoy environments where they can express creativity.   you are eager to analyze and pick apart ideas that others take for granted," +
            "which leads to innovative thinking. you will love coming up with insightful and unbiased solutions to problems.",
        jobs: ["Information security analyst: Information security analysts monitor an organization’s security network, install and deploy software to protect sensitive information, Working as an information security analyst also caters to your love for systems and design.",
            "Business analyst: Business analysts are responsible for analyzing an organization’s systems and processes and recommended areas for improvement using technical and data-driven solutions."
        ],
        categroies: ["Cybersecurity", "Network", "Business Statistics and Analysis"]
    },
    {
        type: "ENTP",
        description: "You prefer to focus on big ideas and bringing them to life  and resist repetitive tasks and routines." + " you prefer conceptual work and problem-solving.",
        jobs: ["Public relations", "Entrepreneur. One of the best matches for your personality type careers is to create your own business By starting a company ."],
        categroies: ["business management", "Modern PR"]
    },
    {
        type: "ISTP",
        description: "you like to study how things work and have a natural aptitude for mastering the use of machines, and other equipment." +
            +"you are very attentive to detail and responsive to the needs of others." +
            "you like to put your technical knowledge to use and are bored easily by theory," +
            "you aspire to achieve technical expertise and look for practical solutions to problems.",
        jobs: ["Engineer. Engineering represents the best careers for you because they are naturally capable of grasping the inner workings of complex systems. From computer hardware engineering to mechanical engineering, electrical engineering, and civil engineering,." +
            "Engineering tasks also make use of your critical thinking skills and preference for logical solutions.",
            "Machinist. Machinists often operate dangerous machinery to produce precision metal parts. you will relish seeing the fruits of their labor in real-time, while the high-risk nature of the work requires them to be focused and attentive to detail." +
            " Machinist work is solitary, which allows you to allow the kind of quiet, intense work they prefer."
        ],
        categroies: ["Solidworks fundamentals", "computer hardware"]
    },
    {
        type: "ESTP",
        description: "You prefer facts to vague concepts. tend to logic and reason when thinking and try to stay away from instinct when making decisions." +
            "You are logical thinker and enjoy using data and patterns to make decisions.",
        jobs: ["Data analyst. Data analysts are experts at disseminating large datasets, noticing trends, and presenting these findings to the rest of their organization. Since you are charismatic adepts at detail-oriented thinking and sociability," +
            "data analyst and data science are two career tracks that can often drive a greater sense of fulfillment for you", "Manager",
            "Digital marketer. Developing a brand and message that’s reflective of a customer lifestyle or need . you are drawn into detail-oriented design even without direct design experience"
        ],
        categroies: ["", ""]
    },
    {
        type: "INFP",
        description: "The best careers for you will give you ample opportunity to express your creativity but won’t require as much interaction with others. Because of your preference to communicate with through writing or art," +
            "top career options will include elements of creative freedom, learning, and highly independent work.",
        jobs: ["Writer", "Musican", "Software Development : As focused thinkers and creative problem-solvers, your knack for communicating with writing lends itself to a proclivity towards learning new languages," +
            "and patience let them approach problems with a clear and focused mind."
        ],
        categroies: ["Developing Your Musicianship", "Practical Music and Audio Skills"]
    },
    {
        type: "ENFP",
        description: "you want to express your creativity and find innovative solutions to curious challenges." +
            "Because of your aptitude for being inventive and futuristic, top career options will include elements of entrepreneurship, design, and relationship-building.",
        jobs: ["Marketing :Marketing teams are often very collaborative and encourage the type of bold ideas ", "Product manager"],
        categroies: ["Digital Marketing"]
    },
    {
        type: "ISFP",
        description: "you have a natural talent for the arts and are deeply attuned to their sensory experience." +
            "you are unusually gifted at creating things that will affect the senses, such as artwork, music, or films." +
            "you will struggle with formal education because you feel it is rigid and inhibits their creativity—an important thing to keep in mind when considering  career options.",
        jobs: ["Art director", "Graphics design", "UX designer", "Front-end web developers"],
        categroies: ["Graphics design", "Front-end"]
    },
    {
        type: "ESFP",
        description: "You are enjoy learning and sharing what you learn with others. you also enjoy any job with excitement and diversity and understands the value of working in teams.",
        jobs: ["Video game developer. your personality type thrive on creative teams. Video game development and design will allow for creative.", "Digital marketer. Marketing teams are often very collaborative and encourage the type of bold ideas that you are sure to bring to the table.", "Event planner"],
        categroies: ["", ""]
    }
];

var Questions = [{
        Text: "You are usually the first to react to a sudden event:unexpected question.",
        Weight: 1,
        ID: 0,
        SelectedValue: null
    },
    // {
    // 	Text: "My social status is more valuable than my privacy.",
    // 	Weight: 1,
    // 	ID: 0,
    // 	SelectedValue: null
    // },
    {
        Text: "Working with a group is better than working alone.",
        Weight: 1,
        ID: 0,
        SelectedValue: null
    },
    {
        Text: "Being around lots of people energizes me.",
        Weight: 1,
        ID: 0,
        SelectedValue: null
    },
    {
        Text: "I prefer a quiet, peaceful office not a busy, noisy one.",
        Weight: -1,
        ID: 0,
        SelectedValue: null
    },
    {
        Text: "I don't like to be friends with my coworkers and to be businesslike in my work relationships.",
        Weight: -1,
        ID: 0,
        SelectedValue: null
    },
    {
        Text: "You find it difficult to get involved in the social life of a new workplace.",
        Weight: -1,
        ID: 0,
        SelectedValue: null
    },
    // {
    // 	Text: "I find it difficult to introduce myself to people.",
    // 	Weight: -1,
    // 	ID: 0,
    // 	SelectedValue: null
    // },


    {
        Text: "When solving a problem you would rather follow a trusted method than seek a new one.",
        Weight: 1,
        ID: 1,
        SelectedValue: null
    },
    // {
    // 	Text: "For you, it is easier to gain knowledge through hands-on experience than from books or manuals.",
    // 	Weight: 1,
    // 	ID: 1,
    // 	SelectedValue: null
    // },
    {
        Text: "You cannot study something that you cannot see, touch, or experience.",
        Weight: 1,
        ID: 1,
        SelectedValue: null
    },
    {
        Text: "I like learning practical skills, and don't like learning about theories.",
        Weight: 1,
        ID: 1,
        SelectedValue: null
    },
    {
        Text: "I like to do things differently, even if I am not sure it will work.",
        Weight: -1,
        ID: 1,
        SelectedValue: null
    },
    {
        Text: "You easily see the general principle behind specific occurrences.",
        Weight: -1,
        ID: 1,
        SelectedValue: null
    },
    // {
    // 	Text: "I am the kind of person who sees the big picture, focusing less on the small details.",
    // 	Weight: -1,
    // 	ID: 1,
    // 	SelectedValue: null
    // },
    {
        Text: "You often put special effort into interpreting the real meaning or the message of a song or a movie.",
        Weight: -1,
        ID: 1,
        SelectedValue: null
    },


    {
        Text: "If you make a mistake, you tend to start doubting yourself, your abilities, or your knowledge.",
        Weight: 1,
        ID: 2,
        SelectedValue: null
    },
    {
        Text: "You always consider how your actions might affect other people before doing something.",
        Weight: 1,
        ID: 2,
        SelectedValue: null
    },
    // {
    // 	Text: "You find it easy to empathize with a person who has gone through something you never have.",
    // 	Weight: 1,
    // 	ID: 2,
    // 	SelectedValue: null
    // },
    {
        Text: "When it comes to making life-changing choices, you mostly listen to your heart rather than your head.",
        Weight: 1,
        ID: 2,
        SelectedValue: null
    },
    {
        Text: "I like solving logical problems.",
        Weight: -1,
        ID: 2,
        SelectedValue: null
    },
    {
        Text: "You can stay calm under a lot of pressure.",
        Weight: -1,
        ID: 2,
        SelectedValue: null
    },
    {
        Text: "In your opinion, it is sometimes OK to step on others to get ahead in life.",
        Weight: -1,
        ID: 2,
        SelectedValue: null
    },
    // {
    // 	Text: "You still honor the commitments you have made even if you have a change of heart.",
    // 	Weight: -1,
    // 	ID: 2,
    // 	SelectedValue: null
    // },

    {
        Text: "Your personal work style is closer to spontaneous bursts of energy than to organized and consistent efforts.",
        Weight: 1,
        ID: 3,
        SelectedValue: null
    },
    {
        Text: "Deadlines seem to you to be of relative rather than absolute importance.",
        Weight: 1,
        ID: 3,
        SelectedValue: null
    },
    {
        Text: "I change my course quickly when things aren’t working.",
        Weight: 1,
        ID: 3,
        SelectedValue: null
    },
    // {
    // 	Text: "I hesitate alot when making decisions.",
    // 	Weight: 1,
    // 	ID: 3,
    // 	SelectedValue: null
    // },
    // {
    // 	Text: "I like a workplace where things go according to a plan.",
    // 	Weight: -1,
    // 	ID: 3,
    // 	SelectedValue: null
    // },
    {
        Text: "I don't like to multitask, I like to focus on one thing at a time.",
        Weight: -1,
        ID: 3,
        SelectedValue: null
    },
    {
        Text: "I can concentrate deeply on something for a long time, I can't tolerate frequent interruptions.",
        Weight: -1,
        ID: 3,
        SelectedValue: null
    },
    {
        Text: "I like to finish all my tasks before I do something fun.",
        Weight: -1,
        ID: 3,
        SelectedValue: null
    }
];

const RadioButtonsValues = [{
        Text: 'Strongly Agree',
        Class: 'btn btn-strongly-agree',
        Weight: 5
    },
    {
        Text: 'Agree',
        Class: 'btn btn-agree',
        Weight: 3,
    },
    {
        Text: 'Neutral',
        Class: 'btn btn-neutral',
        Weight: 0
    },
    {
        Text: 'Disagree',
        Class: 'btn btn-disagree',
        Weight: -3
    },
    {
        Text: 'Strongly Disagree',
        Class: 'btn btn-strongly-disagree',
        Weight: -5
    }
];

var Score = [0, 0, 0, 0];

function RadioButton_OnChange(e) {
    if (Questions[e.target.name].SelectedValue != null) {
        Score[e.target.id] -= Questions[e.target.name].SelectedValue;

        let CurrentlyActive = this.parentNode.parentNode.getElementsByClassName(" active");
        CurrentlyActive[0].className = CurrentlyActive[0].className.replace(" active", "");
    }

    Questions[e.target.name].SelectedValue = parseInt(e.target.value);
    Score[e.target.id] += parseInt(e.target.value);

    this.parentNode.className += ' active';
}

function createPromptItems() {

    for (let i = Questions.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        let Temp = Questions[j];
        Questions[j] = Questions[i];
        Questions[i] = Temp;
    }

    for (let i = 0; i < Questions.length; i++) {
        let Prompt_li = document.createElement('li');
        let Prompt_p = document.createElement('p');
        let Prompt_text = document.createTextNode(Questions[i].Text);

        Prompt_li.setAttribute('class', 'list-group-item prompt');
        Prompt_p.appendChild(Prompt_text);

        Prompt_li.appendChild(Prompt_p);

        let RadioButtons = document.createElement('div');
        RadioButtons.className = 'btn-group btn-group-justified';

        for (let j = 0; j < RadioButtonsValues.length; j++) {
            let RadioButton = document.createElement('input');
            RadioButton.type = 'radio';
            RadioButton.name = i;
            RadioButton.id = Questions[i].ID;
            RadioButton.value = Questions[i].Weight * RadioButtonsValues[j].Weight;
            RadioButton.className = 'btn-check';
            RadioButton.hidden = true;
            RadioButton.addEventListener('change', RadioButton_OnChange);

            let RadioButtonText = document.createElement('label');
            RadioButtonText.innerText = RadioButtonsValues[j].Text;
            RadioButtonText.className = RadioButtonsValues[j].Class;

            RadioButtonText.appendChild(RadioButton);
            RadioButtons.appendChild(RadioButtonText);
        }
        Prompt_li.appendChild(RadioButtons);

        document.getElementById('quiz').appendChild(Prompt_li);
        document.getElementById('quiz').appendChild(document.createElement('br'));
    }
}

$('#submit-btn').click(function() {
    // After clicking submit, add up the totals from answers
    // For each group, find the value that is active
    $('.results').removeClass('hide');
    $('.results').addClass('show');

    let PersonalityIndex = 0;
    for (let i = 0, j = 1; i < 4; ++i, j *= 2) {
        if (Score[i] == 0) {
            PersonalityIndex = -1;
            break;
        }
        PersonalityIndex += (Score[i] > 0) * j;
    }

    if (PersonalityIndex === -1) {
        document.getElementById('results').innerHTML = '<b>Your answers cannot determine your personality!</b><br>' +
            '<b>Please select the answers that descripe yourself the best.</b><br><br>';
    } else {
        var Results = /*'<b>You are an ' + Personalitytypes[PersonalityIndex].type + '</b><br><br>' +*/
            '<b>Description of your personality: </b><br><p class=\'container text-left\'>' + Personalitytypes[PersonalityIndex].description.replace(".", ".<br>") + '</p><br><br>' +
            '<b>Suitable career options: </b><br>' + '<ul class=\'container text-left\'>';
        Personalitytypes[PersonalityIndex].jobs.forEach((job) => { Results += '<li>' + job + '</li>' });
        Results += '</ul>' + '<b>Recommended categroies: </b><br>' + '<ul class=\'container text-left\'>';
        Personalitytypes[PersonalityIndex].categroies.forEach((category) => { Results += '<li>' + category + '</li>' });
        Results += '</ul>';
        document.getElementById('results').innerHTML = Results;

        fetch('http://orse/recommendation', {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-type': 'application/json',
            },
            body: JSON.stringify(Personalitytypes[PersonalityIndex])
        }).then(res => { console.log(res) });
    }

    // Hide the quiz after they submit their results
    $('#quiz').addClass('hide');
    $('#submit-btn').addClass('hide');
    $('#retake-btn').removeClass('hide');
})

// Refresh the screen to show a new quiz if they click the retake quiz button
$('#retake-btn').click(function() {
    $('#quiz').removeClass('hide');
    $('#submit-btn').removeClass('hide');
    $('#retake-btn').addClass('hide');

    $('.results').addClass('hide');
    $('.results').removeClass('show');
})

createPromptItems();